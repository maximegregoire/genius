<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Genius</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/bootstrap.css')}}">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/bootstrap-responsive.css')}}">

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="http://getbootstrap.com/2.3.2/assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="http://getbootstrap.com/2.3.2/assets/ico/favicon.png">
  <style type="text/css"></style></head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="http://getbootstrap.com/2.3.2/examples/starter-template.html#">Genius - Consistently Excellent</a>
          <div class="nav-collapse collapse" style="height: 0px;">
            <ul class="nav">
              <li class="active"><a href="http://getbootstrap.com/2.3.2/examples/starter-template.html#">Home</a></li>
              <li><a href="http://getbootstrap.com/2.3.2/examples/starter-template.html#about">About</a></li>
              <li><a href="http://getbootstrap.com/2.3.2/examples/starter-template.html#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      
	  <h2>Train a new model</h2>
	  {% if model is not none %}
	      <h3>{{model}} model</h3>
	      <h4>First 3 lines of the training file</h4>
	      <table border="1">
	      {% for row in model.getSampleTraining(3) %}
            <tr>
            {% for element in row %}
            <td>{{element}}<td>
            {% endfor %}
            </tr>
	      {% endfor %}
          </table>
	      <form action="/finishmodel" method="POST">
		    <p>
     		Start input column : <input type="number" name="startInput" autofocus required min="0" max="{{model.number_of_columns}}"/><br>
		    End input column : <input type="number" name="endInput" required min="1" max="{{model.number_of_columns}}"/><br>
		    Output column : <input type=number name=output min="0" required max="{{model.number_of_columns}}"><br>
		    Qualitative output : <input type="checkbox" name="qualitative" value="edit"><br>
		    <input type="submit" value="Complete the model"/>
	      </form>
	  {% else %}
	      <form action="/newmodel" method="POST" enctype=multipart/form-data>
		    <p>
     		Model name : <input type="text" required autofocus name="name"/><br>
		    Training model : <input type=file required name=training accept=".csv"><br>
		    Testing model  : <input type=file required name=testing accept=".csv"><br>
		    <input type="submit" value="Upload the files"/>
	      </form>
	  {% endif %}
	  <p>

      <h2>Available models</h2>
			<p>
			    <form action="/train" method="POST">
			    <div style="overflow-x:auto;">
			        <table border="1">
			            <tr>
			            <td>Model name</td>
			            <td>Status</td>
			            <td>Current accuracy (%)</td>
			            <td>Epochs for accuracy</td>
			            <td>Best accuracy (%)</td>
			            <td>Epochs for best accuracy
			            </tr>
				        {% for n in networks %}
				        <tr>
				        <td>
					        <label><input type="radio" 
					        {% if networks.index(n) == 0 %} checked {% endif %} name="network" id="{{n}}" required
						        value="{{n}}"/> {{n}} 
				            </label>
				        </td>
				        <td>{% if n.trained %}Trained{% else %}Not trained{% endif %}</td>
				        <td>{{n.accuracy * 100}}</td>
				        <td>{{n.epochs_for_accuracy}}</td>
				        <td>{{n.best_accuracy * 100}}</td>
				        <td>{{n.epochs_for_best_accuracy}}</td>
				        </tr>
				        {% endfor %}
			        </table>
			        </div>
			        <br>
				    <label>
				        <img src="{{ url_for('static',filename='img/gradient_descent.png')}}" height="100" width="100"/>
				        <input type="radio" name="method" checked id="gradient_descent" required value="gradient_descent"/> Gradient Descent Optimization 
			        </label><br>
			        Number of epochs <input type="number" value="10" required name="epochs"><br>
			        <input type="checkbox" name="100" value="100" checked>Stop if 100% accuracy is reached when testing<br>
				    <input type="submit" value="Train the network"/>
			    </form>
			    <p>
			{% for n in networks if not n.in_training %}
			{% else %}
			    <h2>Model(s) in training</h2>
			{% endfor %}
			<p>
			{% for n in networks if n.in_training %}
				<h3>{{n}}</h3><br>
			{% endfor %}
		<br>
			
	    <h2>Trained models</h2>
	    <p>
	    {% for n in networks if n.trained %}
		    <h4>{{n}} </h4>
		    <form action="/output/{{n}}" method="POST">
		    {% for input in range(n.number_of_columns - 1)%}
			    <input type="number" placeholder="Input {{input}}" name="{{input}}">
			    <br>
		    {% endfor %}
		    <input type="submit" value="Get the output"/>
		    </form>
		    {% if result is not none and result.network == n %}
			    <p> 
			    The output of {{result.inputs}} is 
			    {% if result.outputs|length == 1 %}
				    {{result.outputs[0]}}
			    {% else %}
				    {{result.outputs}}
			    {% endif %}
		    {% endif %}
	    {% else %}
		    None available
	    {% endfor %}
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{ url_for('static', filename='jquery.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-transition.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-alert.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-modal.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-dropdown.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-scrollspy.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-tab.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-tooltip.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-popover.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-button.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-collapse.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-carousel.js') }}"></script>
    <script src="{{ url_for('static', filename='bootstrap-typeahead.js') }}"></script>

  

</body></html>
